GoldenLayout=function(){var t={config:{},controls:{},container:{},errors:{},items:{},utils:{}};return t.utils.DragListener=function(e,i){t.utils.EventEmitter.call(this),this._eElement=$(e),this._oDocument=$(document),this._nButtonCode=i||0,this._nDelay=200,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._bDragging=!1,this._fMove=t.utils.fnBind(this.onMouseMove,this),this._fUp=t.utils.fnBind(this.onMouseUp,this),this._eElement.mousedown(t.utils.fnBind(this.onMouseDown,this))},t.utils.DragListener.timeout=null,t.utils.DragListener.prototype.onMouseDown=function(e){this._nOriginalX=e.pageX,this._nOriginalY=e.pageY,this._oDocument.on("mousemove",this._fMove),this._oDocument.one("mouseup",this._fUp),this._timeout=setTimeout(t.utils.fnBind(this._startDrag,this),this._nDelay)},t.utils.DragListener.prototype.onMouseMove=function(t){t.preventDefault(),this._nX=t.pageX-this._nOriginalX,this._nY=t.pageY-this._nOriginalY,this._bDragging===!1&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&(clearTimeout(this._timeout),this._startDrag()),this._bDragging&&this.emit("drag",this._nX,this._nY,t)},t.utils.DragListener.prototype.onMouseUp=function(t){clearTimeout(this._timeout),this._oDocument.unbind("mousemove",this._fMove),this._bDragging===!0&&(this._bDragging=!1,this.emit("dragStop",t,this._nOriginalX+this._nX))},t.utils.DragListener.prototype._startDrag=function(){this._bDragging=!0,this.emit("dragStart",this._nOriginalX,this._nOriginalY)},t.utils.EventEmitter=function(){this._mSubscriptions={},this.on=function(t,e,i){this._mSubscriptions[t]||(this._mSubscriptions[t]=[]),this._mSubscriptions[t].push({fn:e,ctx:i})},this.emit=function(t){var e,i,n;if(this._mSubscriptions[t])for(e=0;e<this._mSubscriptions[t].length;e++)i=this._mSubscriptions[t][e].ctx||{},n=Array.prototype.slice.call(arguments,1),this._mSubscriptions[t][e].fn.apply(i,n)},this.unbind=function(t,e,i){if(this._mSubscriptions[t]){var n,o=!1;for(n=0;n<this._mSubscriptions[t].length;n++)this._mSubscriptions[t][n].fn!==e||i&&i!==this._mSubscriptions[t][n].ctx||(this._mSubscriptions[t].splice(n,1),o=!0);if(o===!1)throw new Error("Nothing to unbind for "+t)}},this.off=this.unbind,this.trigger=this.emit},t.utils.F=function(){},t.utils.extend=function(e,i){e.prototype=t.utils.createObject(i.prototype),e.prototype.contructor=e},t.utils.createObject=function(e){return"function"==typeof Object.create?Object.create(e):(t.utils.F.prototype=e,new t.utils.F)},t.utils.objectKeys=function(t){var e,i;if("function"==typeof Object.keys)return Object.keys(t);e=[];for(i in t)e.push(i);return e},t.utils.animFrame=function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)})(function(){t()})},t.utils.indexOf=function(t,e){if(!(e instanceof Array))throw new Error("Haystack is not an Array");if(e.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},t.utils.fnBind=function(t,e,i){if(void 0!==Function.prototype.bind)return Function.prototype.bind.apply(t,[e].concat(i||[]));var n=function(){var o=(i||[]).concat(Array.prototype.slice.call(arguments,0));return this instanceof n?void t.apply(this,o):t.apply(e,o)};return n.prototype=t.prototype,n},t.utils.removeFromArray=function(e,i){console.log("removing",e);var n=t.utils.indexOf(e,i);if(-1===n)throw new Error("Can't remove item from array. Item is not in the array");i.splice(n,1)},t.LayoutManager=function(e,i){this._isInitialized=!1,this._isFullPage=!1,this._resizeTimeoutId=null,this._components={},this._itemAreas=[],this.width=null,this.height=null,this.root=null,this.config=this._createConfig(e),this.container=this._getContainer(i),this.dropTargetIndicator=new t.controls.DropTargetIndicator(this.container),this._typeToItem={column:t.utils.fnBind(t.items.RowOrColumn,this,[!0]),row:t.utils.fnBind(t.items.RowOrColumn,this,[!1]),stack:t.items.Stack,component:t.items.Component}},t.LayoutManager.prototype.registerComponent=function(t,e){if("function"!=typeof e)throw new Error("Please register a constructor function");if(void 0!==this._components[t])throw new Error("Component "+t+" is already registered");this._components[t]=e},t.LayoutManager.prototype.getComponent=function(e){if(void 0===this._components[e])throw new t.errors.ConfigurationError("Unknown component "+e);return this._components[e]},t.LayoutManager.prototype.init=function(){this.updateSize(),this._create(this.config),this._bindEvents(),this._isInitialized=!0},t.LayoutManager.prototype.updateSize=function(t,e){2===arguments.length?(this.width=t,this.height=e):(this.width=this.container.width(),this.height=this.container.height()),this._isInitialized===!0&&this.root.callDownwards("setSize")},t.LayoutManager.prototype.getArea=function(t,e){var i,n,o=1/0,s=null;for(i=0;i<this._itemAreas.length;i++)n=this._itemAreas[i],t>n.x1&&t<n.x2&&e>n.y1&&e<n.y2&&o>n.surface&&(o=n.surface,s=n);return s},t.LayoutManager.prototype.calculateItemAreas=function(){var e,i,n=this._getAllContentItems();for(this._itemAreas=[],e=0;e<n.length;e++)n[e]instanceof t.items.Stack&&(i=n[e].getArea(),null!==i&&(i instanceof Array?this._itemAreas=this._itemAreas.concat(i):this._itemAreas.push(i)))},t.LayoutManager.prototype._getAllContentItems=function(){var t=[],e=function(i){if(t.push(i),i.contentItems instanceof Array)for(var n=0;n<i.contentItems.length;n++)e(i.contentItems[n])};return e(this.root),t},t.LayoutManager.prototype._bindEvents=function(){this._isFullPage&&$(window).resize(t.utils.fnBind(this._onResize,this))},t.LayoutManager.prototype._onResize=function(){clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout(t.utils.fnBind(this.updateSize,this),100)},t.LayoutManager.prototype._createConfig=function(e){return $.extend(!0,t.config.defaultConfig,e)},t.LayoutManager.prototype._getContainer=function(t){var e=$(t||document.body);return e[0]===document.body&&(this._isFullPage=!0,$("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"})),e},t.LayoutManager.prototype._create=function(e){var i;if(!(e.content instanceof Array))throw i="Missing setting 'content' on top level of configuration",new t.errors.ConfigurationError(i,e);if(1!==e.content.length)throw i="Top level content can't contain more then one element.",new t.errors.ConfigurationError(i,e);this.root=new t.items.Root(this,e,this.container),this.root.callDownwards("init")},t.LayoutManager.prototype.createContentItem=function(e,i){var n,o;if("string"!=typeof e.type)throw new t.errors.ConfigurationError("Missing parameter 'type'",e);if(!this._typeToItem[e.type])throw n="Unknown type '"+e.type+"'. Valid types are "+t.utils.objectKeys(this._typeToItem).join(","),new t.errors.ConfigurationError(n);return"component"!==e.type||i instanceof t.items.Stack||(e={type:"stack",isClosable:e.isClosable,content:[e]}),o=new this._typeToItem[e.type](this,e,i)},t.config.itemDefaultConfig={isClosable:!0},t.config.defaultConfig={dimensions:{borderWidth:5,minItemHeight:10,minItemWidth:10,headerHeight:20,dragProxyWidth:300,dragProxyHeight:200}},t.container.ItemContainer=function(e,i,n){t.utils.EventEmitter.call(this),this.width=null,this.height=null,this.title=e.componentName,this._parent=i,this._itemNode=e,this._layoutManager=n,this.isHidden=!1,this._element=$(['<div class="lm_item_container">','<div class="lm_content"></div>',"</div>"].join(""))},t.container.ItemContainer.prototype.getElement=function(){return this._element.find(".lm_content")},t.container.ItemContainer.prototype.hide=function(){this.emit("hide"),this.isHidden=!0,this._element.hide()},t.container.ItemContainer.prototype.show=function(){this.emit("show"),this.isHidden=!1,this._element.show()},t.container.ItemContainer.prototype.setSize=function(t,e){(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,this.emit("resize"))},t.container.ItemContainer.prototype.close=function(){this._itemNode.isClosable&&(this.emit("close"),this._parent.close())},t.controls.DragProxy=function(e,i,n,o,s,r){this._dragListener=n,this._layoutManager=o,this._contentItem=s,this._originalParent=r,this._area=null,this._lastValidArea=null,this._dragListener.on("drag",this._onDrag,this),this._dragListener.on("dragStop",this._onDrop,this),this.element=$(t.controls.DragProxy._template),this.element.css({left:e,top:i}),this.childElementContainer=this.element.find(".lm_content"),this.childElementContainer.append(s.element),this._updateTree(),this._layoutManager.calculateItemAreas(),this._setDimensions(),this._layoutManager.container.append(this.element);var h=this._layoutManager.container.offset();this._minX=h.left,this._minY=h.top,this._maxX=this._layoutManager.container.width()+this._minX,this._maxY=this._layoutManager.container.height()+this._minY,this._width=this.element.width(),this._height=this.element.height()},t.controls.DragProxy._template='<div class="lm_dragProxy"><div class="lm_header"><ul class="lm_tabs"><li class="lm_tab"><i class="lm_left"></i><span class="lm_title">todo - title</span><i class="lm_right"></i></li></ul></div><div class="lm_content"></div></div>',t.controls.DragProxy.prototype._onDrag=function(t,e,i){var n=i.clientX,o=i.clientY;n>this._minX&&n<this._maxX&&o>this._minY&&o<this._maxY&&(this.element.css({left:n,top:o}),this._area=this._layoutManager.getArea(n,o),null!==this._area&&(this._lastValidArea=this._area,this._area.contentItem.highlightDropZone(n,o)))},t.controls.DragProxy.prototype._onDrop=function(){this._layoutManager.dropTargetIndicator.hide(),null!==this._area?this._area.contentItem.onDrop(this._contentItem):null!==this._lastValidArea?this._lastValidArea.contentItem.onDrop(this._contentItem):this._originalParent.addChild(this._contentItem),this.element.remove()},t.controls.DragProxy.prototype._updateTree=function(){this._contentItem.parent.removeChild(this._contentItem,!0),this._contentItem.setParent(this)},t.controls.DragProxy.prototype._setDimensions=function(){var t=this._layoutManager.config.dimensions,e=t.dragProxyWidth,i=t.dragProxyHeight-t.headerHeight;this.childElementContainer.width(e),this.childElementContainer.height(i),this._contentItem.element.width(e),this._contentItem.element.height(i),this._contentItem.callDownwards("setSize")},t.controls.DropTargetIndicator=function(e){this.element=$(t.controls.DropTargetIndicator._template),e.append(this.element)},t.controls.DropTargetIndicator._template='<div class="lm_dropTargetIndicator"></div>',t.controls.DropTargetIndicator.prototype.highlight=function(t,e,i,n){this.highlightArea({x1:t,y1:e,x2:i,y2:n})},t.controls.DropTargetIndicator.prototype.highlightArea=function(t){this.element.css({left:t.x1,top:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}).show()},t.controls.DropTargetIndicator.prototype.hide=function(){this.element.hide()},t.controls.Header=function(e,i){this.layoutManager=e,this.element=$(t.controls.Header._template),this.element.height(e.config.dimensions.headerHeight),this.tabsContainer=this.element.find(".lm_tabs"),this.parent=i,this.tabs=[],this.activeComponent=null,this._closeFn=t.utils.fnBind(this._removeStack,this),this._closeBtn=this.element.find(".lm_controls .lm_close"),this._closeBtn.click(this._closeFn),this._closeBtn[i.itemNode.isClosable?"show":"hide"]()},t.controls.Header._template=['<div class="lm_header">','<ul class="lm_tabs"></ul>','<ul class="lm_controls">','<li class="lm_close"></li>',"</ul>","</div>"].join(""),t.controls.Header.prototype.createTab=function(e){this.tabs.push(new t.controls.Tab(this,e))},t.controls.Header.prototype.destroy=function(){this._closeBtn.off("click",this._closeFn);for(var t=0;t<this.tabs.length;t++)this.tabs[t].destroy();this.element.remove()},t.controls.Header.prototype.setActiveContentItem=function(t){for(var e=0;e<this.tabs.length;e++)this.tabs[e].setActive(this.tabs[e].contentItem===t)},t.controls.Header.prototype.removeContentItem=function(t){for(var e=0;e<this.tabs.length;e++)if(this.tabs[e].contentItem===t)return this.tabs[e].destroy(),void this.tabs.splice(e,1);throw new Error("contentItem is not controlled by this header")},t.controls.Header.prototype._removeStack=function(){this.parent.parent.removeChild(this.parent)},t.controls.Header.prototype._bindControls=function(){var e=this._element.find(".lm_controls");e.find(".lm_close").click(t.utils.fnBind(this.emit,this,["close"]))},t.controls.Splitter=function(e,i){this._isVertical=e,this._size=i,this.element=this._createElement(),this._dragListener=new t.utils.DragListener(this.element)},t.controls.Splitter.prototype.on=function(t,e,i){this._dragListener.on(t,e,i)},t.controls.Splitter.prototype.destroy=function(){this.element.remove()},t.controls.Splitter.prototype._createElement=function(){var t=$('<div class="lm_splitter"><div class="lm_drag_handle"></div></div>');return t.addClass("lm_"+(this._isVertical?"vertical":"horizontal")),t[this._isVertical?"height":"width"](this._size),t},t.controls.Tab=function(e,i){this.header=e,this.contentItem=i,this.element=$(t.controls.Tab._template),this.titleElement=this.element.find(".lm_title"),this.closeElement=this.element.find(".lm_close_tab"),this.closeElement[i.itemNode.isClosable?"show":"hide"](),this.isActive=!1,this.setTitle(i.container.title),this._layoutManager=this.contentItem.layoutManager,this._dragListener=new t.utils.DragListener(this.element),this._dragListener.on("dragStart",this._onDragStart,this),this._onTabClickFn=t.utils.fnBind(this._onTabClick,this),this._onCloseClickFn=t.utils.fnBind(this._onCloseClick,this),this.element.click(this._onTabClickFn),this.closeElement.click(this._onCloseClickFn),this.header.tabsContainer.append(this.element)},t.controls.Tab._template='<li class="lm_tab"><i class="lm_left"></i><span class="lm_title"></span><div class="lm_close_tab"></div><i class="lm_right"></i></li>',t.controls.Tab.prototype.setTitle=function(t){this.titleElement.html(t)},t.controls.Tab.prototype.setActive=function(t){t!==this.isActive&&(this.isActive=t,t?this.element.addClass("active"):this.element.removeClass("active"))},t.controls.Tab.prototype.destroy=function(){this.element.off("click",this._onTabClickFn),this.closeElement.off("click",this._onCloseClickFn),this.element.remove()},t.controls.Tab.prototype._onDragStart=function(e,i){new t.controls.DragProxy(e,i,this._dragListener,this._layoutManager,this.contentItem,this.header.parent)},t.controls.Tab.prototype._onTabClick=function(){this.header.parent.setActiveContentItem(this.contentItem)},t.controls.Tab.prototype._onCloseClick=function(t){t.stopPropagation(),this.header.parent.removeChild(this.contentItem)},t.errors.ConfigurationError=function(t,e){Error.call(this),this.name="Configuration Error",this.message=t,this.node=e},t.errors.ConfigurationError.prototype=new Error,t.items.AbstractContentItem=function(t,e,i){this.itemNode=this._extendItemNode(e),this.contentItems=[],this.parent=i,this.width=e.width,this.height=e.height,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.layoutManager=t,e.content&&this._createContentItems(e)},t.items.AbstractContentItem.prototype.setSize=function(){throw new Error("Abstract Method")},t.items.AbstractContentItem.prototype.init=function(){var t;for(this.setSize(),t=0;t<this.contentItems.length;t++)this.childElementContainer.append(this.contentItems[t].element)},t.items.AbstractContentItem.prototype.callDownwards=function(t,e,i,n){var o;for(i!==!0&&n!==!0&&this[t].apply(this,e||[]),o=0;o<this.contentItems.length;o++)this.contentItems[o].callDownwards(t,e,i);i===!0&&n!==!0&&this[t].apply(this,e||[])},t.items.AbstractContentItem.prototype.removeChild=function(e,i){var n=t.utils.indexOf(e,this.contentItems);if(-1===n)throw new Error("Can't remove child item. Unknown content item");i!==!0&&this.contentItems[n].destroy(),this.contentItems.splice(n,1),this.itemNode.content.splice(n,1),this.contentItems.length>0?this.callDownwards("setSize"):this instanceof t.items.Root||this.parent.removeChild(this)},t.items.AbstractContentItem.prototype.setParent=function(t){this.parent=t},t.items.AbstractContentItem.prototype.highlightDropZone=function(){},t.items.AbstractContentItem.prototype.onDrop=function(){},t.items.AbstractContentItem.prototype.addChild=function(t,e){var i=e===!0?"unshift":"push",n=e===!0?"prepend":"append";this.contentItems[i](t),void 0===this.itemNode.content&&(this.itemNode.content=[]),this.itemNode.content[i](t.itemNode),this.childElementContainer[n](t.element),t.parent=this},t.items.AbstractContentItem.prototype.replaceChild=function(e,i){var n=t.utils.indexOf(e,this.contentItems),o=e.element[0].parentNode;if(-1===n)throw new Error("Can't replace child. oldChild is not child of this");o.replaceChild(i.element[0],e.element[0]),this.contentItems[n]=i,i.parent=this},t.items.AbstractContentItem.prototype.destroy=function(){this.callDownwards("destroy",[],!0,!0),this.element.remove()},t.items.AbstractContentItem.prototype.getArea=function(t){t=t||this.element;var e=t.offset(),i=t.width(),n=t.height();return{x1:e.left,y1:e.top,x2:e.left+i,y2:e.top+n,surface:i*n,contentItem:this}},t.items.AbstractContentItem.prototype._createContentItems=function(e){var i,n;if(!(e.content instanceof Array))throw new t.errors.ConfigurationError("content must be an Array",e);for(n=0;n<e.content.length;n++)i=this.layoutManager.createContentItem(e.content[n],this),this.contentItems.push(i)},t.items.AbstractContentItem.prototype._extendItemNode=function(e){for(var i in t.config.itemDefaultConfig)void 0===e[i]&&(e[i]=t.config.itemDefaultConfig[i]);return e},t.items.Component=function(e,i,n){t.items.AbstractContentItem.call(this,e,i,n);var o=e.getComponent(this.itemNode.componentName),s=$.extend(!0,{},this.itemNode.componentState||{});s.componentName=this.itemNode.componentName,this.isComponent=!0,this.container=new t.container.ItemContainer(this.itemNode,this,e),this.component=new o(this.container,s),this.element=this.container._element},t.utils.extend(t.items.Component,t.items.AbstractContentItem),t.items.Component.prototype.destroy=function(){this.container.emit("destroy"),t.items.AbstractContentItem.prototype.destroy.call(this)},t.items.Component.prototype.setSize=function(){this.container.setSize(this.element.width(),this.element.height())},t.items.Component.prototype.getArea=function(){return null},t.items.Component.prototype.close=function(){this.parent.removeChild(this)},t.items.Root=function(e,i,n){t.items.AbstractContentItem.call(this,e,i,null),this.element=$('<div class="lm_item lm_root"></div>'),this.childElementContainer=this.element,this._containerElement=n,this._containerElement.append(this.element)},t.utils.extend(t.items.Root,t.items.AbstractContentItem),t.items.Root.prototype.setSize=function(){this.contentItems[0].element.width(this._containerElement.width()),this.contentItems[0].element.height(this._containerElement.height())},t.items.RowOrColumn=function(e,i,n,o){t.items.AbstractContentItem.call(this,i,n,o),this.isRow=!e,this.isColumn=e,this.element=$('<div class="lm_item lm_'+(e?"column":"row")+'"></div>'),this.childElementContainer=this.element,this._splitterSize=i.config.dimensions.borderWidth,this._isColumn=e,this._dimension=e?"height":"width",this._splitter=[],this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null},t.utils.extend(t.items.RowOrColumn,t.items.AbstractContentItem),t.items.RowOrColumn.prototype.init=function(){var e;for(t.items.AbstractContentItem.prototype.init.call(this),e=0;e<this.contentItems.length-1;e++)this.contentItems[e].element.after(this._createSplitter().element)},t.items.RowOrColumn.prototype.replaceChild=function(e,i){var n=e.itemNode[this._dimension];t.items.AbstractContentItem.prototype.replaceChild.call(this,e,i),e.itemNode[this._dimension]=n,this.callDownwards("setSize")},t.items.RowOrColumn.prototype.addChild=function(e,i){var n,o,s;for(this.contentItems.length>0&&this.childElementContainer[i===!0?"prepend":"append"](this._createSplitter().element),t.items.AbstractContentItem.prototype.addChild.call(this,e,i),n=1/this.contentItems.length*100,s=0;s<this.contentItems.length;s++)this.contentItems[s]===e?e.itemNode[this._dimension]=n:(o=this.contentItems[s][this._dimension]*=(100-n)/100,this.contentItems[s].itemNode[this._dimension]=o);this.callDownwards("setSize")},t.items.RowOrColumn.prototype.removeChild=function(e,i){var n,o=e[this._dimension],s=t.utils.indexOf(e,this.contentItems),r=Math.max(s-1,0);for(this._splitter[r]&&(this._splitter[r].destroy(),this._splitter.splice(r,1)),n=0;n<this.contentItems.length;n++)this.contentItems[n]!==e&&(this.contentItems[n][this._dimension]+=o/(this.contentItems.length-1));t.items.AbstractContentItem.prototype.removeChild.call(this,e,i),this.callDownwards("setSize")},t.items.RowOrColumn.prototype.setSize=function(){if(0!==this.contentItems.length){var t,e=(this.contentItems.length-1)*this._splitterSize,i=this.element.width(),n=this.element.height();for(this._isColumn?n-=e:i-=e,this._calculateDimensions(this.contentItems,this._isColumn?"height":"width"),t=0;t<this.contentItems.length;t++)this._isColumn?(this.contentItems[t].element.width(i),this.contentItems[t].element.height(n*(this.contentItems[t].height/100))):(this.contentItems[t].element.width(i*(this.contentItems[t].width/100)),this.contentItems[t].element.height(n))}},t.items.RowOrColumn.prototype._calculateDimensions=function(e,i){var n,o,s=0,r=0;for(n=0;n<e.length;n++)void 0!==e[n][i]?s+=e[n][i]:r++;if(Math.round(s)>100)throw o="Total for '"+i+"' exceeds 100",new t.errors.ConfigurationError(o,e);if(Math.round(s)<100&&0===r)throw o="configured total ("+s+") for '"+i+"' is less than 100 and there are no items to allocate the remaining "+i+" to",new t.errors.ConfigurationError(o,e);if(r>0)for(n=0;n<e.length;n++)void 0===e[n][i]&&(e[n][i]=(100-s)/r)},t.items.RowOrColumn.prototype._createSplitter=function(){var e;return e=new t.controls.Splitter(this._isColumn,this._splitterSize),e.on("drag",t.utils.fnBind(this._onSplitterDrag,this,[e]),this),e.on("dragStop",t.utils.fnBind(this._onSplitterDragStop,this,[e]),this),e.on("dragStart",t.utils.fnBind(this._onSplitterDragStart,this,[e]),this),this._splitter.push(e),e},t.items.RowOrColumn.prototype._getItemsForSplitter=function(e){var i=t.utils.indexOf(e,this._splitter);return{before:this.contentItems[i],after:this.contentItems[i+1]}},t.items.RowOrColumn.prototype._onSplitterDragStart=function(t){var e=this._getItemsForSplitter(t),i=this.layoutManager.config.dimensions[this._isColumn?"minItemHeight":"minItemWidth"];this._splitterPosition=0,this._splitterMinPosition=-1*(e.before.element[this._dimension]()-i),this._splitterMaxPosition=e.after.element[this._dimension]()-i},t.items.RowOrColumn.prototype._onSplitterDrag=function(t,e,i){var n=this._isColumn?i:e;n>this._splitterMinPosition&&n<this._splitterMaxPosition&&(this._splitterPosition=n,t.element.css(this._isColumn?"top":"left",n))},t.items.RowOrColumn.prototype._onSplitterDragStop=function(e){var i=this._getItemsForSplitter(e),n=i.before.element[this._dimension](),o=i.after.element[this._dimension](),s=(this._splitterPosition+n)/(n+o),r=i.before[this._dimension]+i.after[this._dimension];i.before[this._dimension]=s*r,i.after[this._dimension]=(1-s)*r,e.element.css({top:0,left:0}),t.utils.animFrame(t.utils.fnBind(this.callDownwards,this,["setSize"]))},t.items.Stack=function(e,i,n){t.items.AbstractContentItem.call(this,e,i,n),this.element=$('<div class="lm_item lm_stack"></div>'),this._activeContentItem=null,this._dropZones={},this._dropSegment=null,this.isStack=!0,this.childElementContainer=$('<div class="lm_items"></div>'),this.header=new t.controls.Header(e,this),this.element.append(this.header.element),this.element.append(this.childElementContainer)},t.utils.extend(t.items.Stack,t.items.AbstractContentItem),t.items.Stack.prototype.setSize=function(){var t,e=this.element.width(),i=this.element.height()-this.layoutManager.config.dimensions.headerHeight;for(this.childElementContainer.width(e),this.childElementContainer.height(i),t=0;t<this.contentItems.length;t++)this.contentItems[t].element.width(e).height(i)},t.items.Stack.prototype.destroy=function(){t.items.AbstractContentItem.prototype.destroy.call(this),this.header.destroy()},t.items.Stack.prototype.init=function(){t.items.AbstractContentItem.prototype.init.call(this);for(var e=0;e<this.contentItems.length;e++)this.header.createTab(this.contentItems[e]),this.contentItems[e].container.hide();this.contentItems.length>0&&this.setActiveContentItem(this.contentItems[0])},t.items.Stack.prototype.setActiveContentItem=function(e){if(-1===t.utils.indexOf(e,this.contentItems))throw new Error("Component is not a child of this stack");null!==this._activeContentItem&&this._activeContentItem.container.hide(),this._activeContentItem=e,this.header.setActiveContentItem(e),e.container.show()},t.items.Stack.prototype.addChild=function(e){t.items.AbstractContentItem.prototype.addChild.call(this,e),this.header.createTab(e),this.setActiveContentItem(e),this.callDownwards("setSize")},t.items.Stack.prototype.removeChild=function(e,i){var n=t.utils.indexOf(e,this.contentItems);t.items.AbstractContentItem.prototype.removeChild.call(this,e,i),this.header.removeContentItem(e),this.contentItems.length>0&&this.setActiveContentItem(this.contentItems[Math.max(n-1,0)])},t.items.Stack.prototype.onDrop=function(t){if("header"===this._dropSegment)return void this.addChild(t);var e,i,n,o="top"===this._dropSegment||"bottom"===this._dropSegment,s="left"===this._dropSegment||"right"===this._dropSegment,r="top"===this._dropSegment||"left"===this._dropSegment,h=o&&this.parent.isColumn||s&&this.parent.isRow;t.isComponent&&(e=this.layoutManager.createContentItem({type:"stack"},this),e.addChild(t),t=e),h?this.parent.addChild(t,r):(i=o?"column":"row",n=this.layoutManager.createContentItem({type:i},this),this.parent.replaceChild(this,n),r?(n.addChild(t),n.addChild(this)):(n.addChild(this),n.addChild(t)))},t.items.Stack.prototype.highlightDropZone=function(t,e){var i,n,o;for(i in this._contentAreaDimensions)if(n=this._contentAreaDimensions[i].hoverArea,n.x1<t&&n.x2>t&&n.y1<e&&n.y2>e)return o=this._contentAreaDimensions[i].highlightArea,this.layoutManager.dropTargetIndicator.highlightArea(o),void(this._dropSegment=i)},t.items.Stack.prototype.getArea=function(){var e=t.items.AbstractContentItem.prototype.getArea,i=e.call(this,this.header.element),n=e.call(this,this.childElementContainer),o=n.x2-n.x1,s=n.y2-n.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},highlightArea:{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}},left:{hoverArea:{x1:n.x1,y1:n.y1,x2:n.x1+.25*o,y2:n.y2},highlightArea:{x1:n.x1,y1:n.y1,x2:n.x1+.5*o,y2:n.y2}},top:{hoverArea:{x1:n.x1+.25*o,y1:n.y1,x2:n.x1+.75*o,y2:n.y1+.5*s},highlightArea:{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y1+.5*s}},right:{hoverArea:{x1:n.x1+.75*o,y1:n.y1,x2:n.x2,y2:n.y2},highlightArea:{x1:n.x1+.5*o,y1:n.y1,x2:n.x2,y2:n.y2}},bottom:{hoverArea:{x1:n.x1+.25*o,y1:n.y1+.5*s,x2:n.x1+.75*o,y2:n.y2},highlightArea:{x1:n.x1,y1:n.y1+.5*s,x2:n.x2,y2:n.y2}}},e.call(this,this.element)},t.LayoutManager}();