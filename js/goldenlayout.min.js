GoldenLayout=function(){var t={controls:{},container:{},errors:{},items:{},utils:{},config:{}};return t.utils.F=function(){},t.utils.extend=function(e,i){e.prototype=t.utils.createObject(i.prototype),e.prototype.contructor=e},t.utils.createObject=function(e){return"function"==typeof Object.create?Object.create(e):(t.utils.F.prototype=e,new t.utils.F)},t.utils.objectKeys=function(t){var e,i;if("function"==typeof Object.keys)return Object.keys(t);e=[];for(i in t)e.push(i);return e},t.utils.copy=function(t,e){for(var i in e)t[i]=e[i]},t.utils.animFrame=function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)})(function(){t()})},t.utils.indexOf=function(t,e){if(!(e instanceof Array))throw new Error("Haystack is not an Array");if(e.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},t.utils.fnBind=function(t,e,i){if(void 0!==Function.prototype.bind)return Function.prototype.bind.apply(t,[e].concat(i||[]));var n=function(){var s=(i||[]).concat(Array.prototype.slice.call(arguments,0));return this instanceof n?void t.apply(this,s):t.apply(e,s)};return n.prototype=t.prototype,n},t.utils.removeFromArray=function(e,i){var n=t.utils.indexOf(e,i);if(-1===n)throw new Error("Can't remove item from array. Item is not in the array");i.splice(n,1)},t.utils.EventEmitter=function(){this._mSubscriptions={},this._mSubscriptions[t.utils.EventEmitter.ALL_EVENT]=[],this.on=function(t,e,i){this._mSubscriptions[t]||(this._mSubscriptions[t]=[]),this._mSubscriptions[t].push({fn:e,ctx:i})},this.emit=function(e){var i,n,s;if(s=Array.prototype.slice.call(arguments,1),this._mSubscriptions[e])for(i=0;i<this._mSubscriptions[e].length;i++)n=this._mSubscriptions[e][i].ctx||{},this._mSubscriptions[e][i].fn.apply(n,s);for(s.unshift(e),i=0;i<this._mSubscriptions[t.utils.EventEmitter.ALL_EVENT].length;i++)n=this._mSubscriptions[t.utils.EventEmitter.ALL_EVENT][i].ctx||{},this._mSubscriptions[t.utils.EventEmitter.ALL_EVENT][i].fn.apply(n,s)},this.unbind=function(t,e,i){if(!this._mSubscriptions[t])throw new Error("No subscribtions to unsubscribe for event "+t);var n,s=!1;for(n=0;n<this._mSubscriptions[t].length;n++)this._mSubscriptions[t][n].fn!==e||i&&i!==this._mSubscriptions[t][n].ctx||(this._mSubscriptions[t].splice(n,1),s=!0);if(s===!1)throw new Error("Nothing to unbind for "+t)},this.off=this.unbind,this.trigger=this.emit},t.utils.EventEmitter.ALL_EVENT="__all",t.utils.DragListener=function(e,i){t.utils.EventEmitter.call(this),this._eElement=$(e),this._oDocument=$(document),this._eBody=$(document.body),this._nButtonCode=i||0,this._nDelay=200,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._bDragging=!1,this._fMove=t.utils.fnBind(this.onMouseMove,this),this._fUp=t.utils.fnBind(this.onMouseUp,this),this._eElement.mousedown(t.utils.fnBind(this.onMouseDown,this))},t.utils.DragListener.timeout=null,t.utils.copy(t.utils.DragListener.prototype,{onMouseDown:function(e){e.preventDefault(),this._nOriginalX=e.pageX,this._nOriginalY=e.pageY,this._oDocument.on("mousemove",this._fMove),this._oDocument.one("mouseup",this._fUp),this._timeout=setTimeout(t.utils.fnBind(this._startDrag,this),this._nDelay)},onMouseMove:function(t){t.preventDefault(),this._nX=t.pageX-this._nOriginalX,this._nY=t.pageY-this._nOriginalY,this._bDragging===!1&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&(clearTimeout(this._timeout),this._startDrag()),this._bDragging&&this.emit("drag",this._nX,this._nY,t)},onMouseUp:function(t){clearTimeout(this._timeout),this._eBody.removeClass("lm_dragging"),this._oDocument.unbind("mousemove",this._fMove),this._bDragging===!0&&(this._bDragging=!1,this.emit("dragStop",t,this._nOriginalX+this._nX))},_startDrag:function(){this._bDragging=!0,this._eBody.addClass("lm_dragging"),this.emit("dragStart",this._nOriginalX,this._nOriginalY)}}),t.LayoutManager=function(e,i){t.utils.EventEmitter.call(this),this.isInitialised=!1,this._isFullPage=!1,this._resizeTimeoutId=null,this._components={},this._itemAreas=[],this._resizeFunction=t.utils.fnBind(this._onResize,this),this._maximisedItem=null,this._maximisePlaceholder=$('<div class="lm_maximise_place"></div>'),this.width=null,this.height=null,this.root=null,this.config=this._createConfig(e),this.container=i,this.dropTargetIndicator=null,this.tabDropPlaceholder=$('<div class="lm_drop_tab_placeholder"></div>'),this._typeToItem={column:t.utils.fnBind(t.items.RowOrColumn,this,[!0]),row:t.utils.fnBind(t.items.RowOrColumn,this,[!1]),stack:t.items.Stack,component:t.items.Component}},t.utils.copy(t.LayoutManager.prototype,{registerComponent:function(t,e){if("function"!=typeof e)throw new Error("Please register a constructor function");if(void 0!==this._components[t])throw new Error("Component "+t+" is already registered");this._components[t]=e},toConfig:function(){var t=$.extend(!0,{},this.config);t.content=[];var e=function(t,i){var n,s;for(n in i.config)"content"!==n&&(t[n]=i.config[n]);if(i.contentItems.length)for(t.content=[],s=0;s<i.contentItems.length;s++)t.content[s]={},e(t.content[s],i.contentItems[s])};return e(t,this.root),t},getComponent:function(e){if(void 0===this._components[e])throw new t.errors.ConfigurationError("Unknown component "+e);return this._components[e]},init:function(){return"loading"===document.readyState?void $(document).ready(this.init.bind(this)):(this._setContainer(),this.dropTargetIndicator=new t.controls.DropTargetIndicator(this.container),this.updateSize(),this._create(this.config),this._bindEvents(),this.isInitialised=!0,void this.emit("initialised"))},updateSize:function(t,e){2===arguments.length?(this.width=t,this.height=e):(this.width=this.container.width(),this.height=this.container.height()),this.isInitialised===!0&&this.root.callDownwards("setSize")},destroy:function(){$(window).off("resize",this._resizeFunction),this.root.callDownwards("_$destroy",[],!0),this.root.contentItems=[],this.tabDropPlaceholder.remove(),this.dropTargetIndicator.element.remove()},createContentItem:function(e,i){var n,s;if("string"!=typeof e.type)throw new t.errors.ConfigurationError("Missing parameter 'type'",e);if(!this._typeToItem[e.type])throw n="Unknown type '"+e.type+"'. Valid types are "+t.utils.objectKeys(this._typeToItem).join(","),new t.errors.ConfigurationError(n);return"component"!==e.type||i instanceof t.items.Stack||!i||(e={type:"stack",isClosable:e.isClosable,content:[e]}),s=new this._typeToItem[e.type](this,e,i)},_$maximiseItem:function(t){null!==this._maximisedItem&&this._$minimiseItem(this._maximisedItem),this._maximisedItem=t,t.element.addClass("lm_maximised"),t.element.after(this._maximisePlaceholder),this.container.prepend(t.element),t.element.width(this.container.width()),t.element.height(this.container.height()),t.callDownwards("setSize")},_$minimiseItem:function(t){t.element.removeClass("lm_maximised"),this._maximisePlaceholder.after(t.element),this._maximisePlaceholder.remove(),t.parent.callDownwards("setSize"),this._maximisedItem=null},_$getArea:function(t,e){var i,n,s=1/0,o=null;for(i=0;i<this._itemAreas.length;i++)n=this._itemAreas[i],t>n.x1&&t<n.x2&&e>n.y1&&e<n.y2&&s>n.surface&&(s=n.surface,o=n);return o},_$calculateItemAreas:function(){var t,e,i=this._getAllContentItems();if(this._itemAreas=[],1===i.length)return void this._itemAreas.push(this.root._$getArea());for(t=0;t<i.length;t++)i[t].isStack&&(e=i[t]._$getArea(),null!==e&&(e instanceof Array?this._itemAreas=this._itemAreas.concat(e):this._itemAreas.push(e)))},_$normalizeContentItem:function(e){if(e instanceof t.items.AbstractContentItem)return e;if(!e)throw new Error("No content item defined");if(e instanceof Object&&e.type){var i=this.createContentItem(e,null);return i.callDownwards("_$init"),i}throw new Error("Invalid contentItem")},_getAllContentItems:function(){var t=[],e=function(i){if(t.push(i),i.contentItems instanceof Array)for(var n=0;n<i.contentItems.length;n++)e(i.contentItems[n])};return e(this.root),t},_bindEvents:function(){this._isFullPage&&$(window).resize(this._resizeFunction)},_onResize:function(){clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout(t.utils.fnBind(this.updateSize,this),100)},_createConfig:function(e){return e=$.extend(!0,{},t.config.defaultConfig,e),e.settings.hasHeaders===!1&&(e.dimensions.headerHeight=0),e},_setContainer:function(){var t=$(this.container||document.body);t[0]===document.body&&(this._isFullPage=!0,$("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"})),this.container=t},_create:function(e){var i;if(!(e.content instanceof Array))throw i=void 0===e.content?"Missing setting 'content' on top level of configuration":"Configuration parameter 'content' must be an array",new t.errors.ConfigurationError(i,e);if(1!==e.content.length)throw i="Top level content can't contain more then one element.",new t.errors.ConfigurationError(i,e);this.root=new t.items.Root(this,{content:e.content},this.container),this.root.callDownwards("_$init")}}),function(){"function"==typeof define&&define.amd?define(function(){return t.LayoutManager}):"object"==typeof exports?module.exports=t.LayoutManager:window.GoldenLayout=t.LayoutManager}(),t.config.itemDefaultConfig={isClosable:!0},t.config.defaultConfig={settings:{hasHeaders:!0,constrainDragToContainer:!0},dimensions:{borderWidth:5,minItemHeight:10,minItemWidth:10,headerHeight:20,dragProxyWidth:300,dragProxyHeight:200},labels:{close:"close",maximise:"maximise",minimise:"minimise",popout:"open in new window"}},t.controls.BrowserPopout=function(t){this._contentItem=t,this._contentItem.parent.removeChild(this._contentItem,!0),this._optionsString=this._serializeWindowOptions({width:t.element.width(),height:t.element.height(),menubar:"no",toolbar:"no",location:"no",personalbar:"no",resizable:"yes",scrollbars:"no",status:"no"}),this._createWindow()},t.utils.copy(t.controls.BrowserPopout.prototype,{_createWindow:function(){var e=document.location.origin+"/doesnotexits",i=this._contentItem.title;this._popoutWindow=window.open(e,i,this._optionsString),this._popoutWindow.onload=function(){this._popoutWindow.document.body.innerHTML="",this._popoutWindow.document.head.innerHTML="",this._popoutWindow.document.body.appendChild(this._contentItem.element[0]),$(this._popoutWindow).on("resize",t.utils.fnBind(this._resizeContentItem,this)),$(this._popoutWindow).on("beforeunload",t.utils.fnBind(this._onWindowClose,this)),this._transferStylesheets(),this._contentItem._$setParent(this)}.bind(this)},_transferStylesheets:function(){var t,e,i,n=$("link");for(t=0;t<n.length;t++)e=n[t].cloneNode(),i=document.location.origin+document.location.pathname+e.getAttribute("href"),e.setAttribute("href",i),this._popoutWindow.document.head.appendChild(e)},_serializeWindowOptions:function(t){var e,i=[];for(e in t)i.push(e+"="+t[e]);return i.join(",")},_resizeContentItem:function(){this.width=this._popoutWindow.innerWidth,this.height=this._popoutWindow.innerHeight,this._contentItem.element.width(this.width),this._contentItem.element.height(this.height),this._contentItem.callDownwards("setSize")},_onWindowClose:function(){this._contentItem.remove()}}),t.controls.DragProxy=function(e,i,n,s,o,r){this._dragListener=n,this._layoutManager=s,this._contentItem=o,this._originalParent=r,this._area=null,this._lastValidArea=null,this._dragListener.on("drag",this._onDrag,this),this._dragListener.on("dragStop",this._onDrop,this),this.element=$(t.controls.DragProxy._template),this.element.css({left:e,top:i}),this.childElementContainer=this.element.find(".lm_content"),this.childElementContainer.append(o.element),this._updateTree(),this._layoutManager._$calculateItemAreas(),this._setDimensions(),$(document.body).append(this.element);var h=this._layoutManager.container.offset();this._minX=h.left,this._minY=h.top,this._maxX=this._layoutManager.container.width()+this._minX,this._maxY=this._layoutManager.container.height()+this._minY,this._width=this.element.width(),this._height=this.element.height()},t.controls.DragProxy._template='<div class="lm_dragProxy"><div class="lm_header"><ul class="lm_tabs"><li class="lm_tab lm_active"><i class="lm_left"></i><span class="lm_title">todo - title</span><i class="lm_right"></i></li></ul></div><div class="lm_content"></div></div>',t.utils.copy(t.controls.DragProxy.prototype,{_onDrag:function(t,e,i){var n=i.clientX,s=i.clientY,o=n>this._minX&&n<this._maxX&&s>this._minY&&s<this._maxY;(o||this._layoutManager.config.settings.constrainDragToContainer!==!0)&&(this.element.css({left:n,top:s}),this._area=this._layoutManager._$getArea(n,s),null!==this._area&&(this._lastValidArea=this._area,this._area.contentItem._$highlightDropZone(n,s,this._area)))},_onDrop:function(){this._layoutManager.dropTargetIndicator.hide(),null!==this._area?this._area.contentItem._$onDrop(this._contentItem):null!==this._lastValidArea?this._lastValidArea.contentItem._$onDrop(this._contentItem):this._originalParent.addChild(this._contentItem),this.element.remove()},_updateTree:function(){this._contentItem.parent.removeChild(this._contentItem,!0),this._contentItem._$setParent(this)},_setDimensions:function(){var t=this._layoutManager.config.dimensions,e=t.dragProxyWidth,i=t.dragProxyHeight-t.headerHeight;this.childElementContainer.width(e),this.childElementContainer.height(i),this._contentItem.element.width(e),this._contentItem.element.height(i),this._contentItem.callDownwards("_$show"),this._contentItem.callDownwards("setSize")}}),t.controls.DropTargetIndicator=function(){this.element=$(t.controls.DropTargetIndicator._template),$(document.body).append(this.element)},t.controls.DropTargetIndicator._template='<div class="lm_dropTargetIndicator"></div>',t.utils.copy(t.controls.DropTargetIndicator.prototype,{highlight:function(t,e,i,n){this.highlightArea({x1:t,y1:e,x2:i,y2:n})},highlightArea:function(t){this.element.css({left:t.x1,top:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}).show()},hide:function(){this.element.hide()}}),t.controls.Header=function(e,i){t.utils.EventEmitter.call(this),this.layoutManager=e,this.element=$(t.controls.Header._template),this.element.height(e.config.dimensions.headerHeight),this.tabsContainer=this.element.find(".lm_tabs"),this.controlsContainer=this.element.find(".lm_controls"),this.parent=i,this.tabs=[],this.activeComponent=null,this._createControls()},t.controls.Header._template=['<div class="lm_header">','<ul class="lm_tabs"></ul>','<ul class="lm_controls"></ul>',"</div>"].join(""),t.utils.copy(t.controls.Header.prototype,{createTab:function(e,i){var n=new t.controls.Tab(this,e);return 0===this.tabs.length?(this.tabs.push(n),void this.tabsContainer.append(n.element)):(void 0===i&&(i=this.tabs.length),i>0?this.tabs[i-1].element.after(n.element):this.tabs[0].element.before(n.element),void this.tabs.splice(i,0,n))},_createControls:function(){var e,i,n,s;i=t.utils.fnBind(this.parent.popout,this.parent),n=this.layoutManager.config.labels.popout,new t.controls.HeaderButton(this,n,"lm_popout",i),s=t.utils.fnBind(this.parent.toggleMaximise,this.parent),n=this.layoutManager.config.labels.maximise,new t.controls.HeaderButton(this,n,"lm_maximise",s),this.parent.config.isClosable&&(e=t.utils.fnBind(this.parent.remove,this.parent),n=this.layoutManager.config.labels.close,new t.controls.HeaderButton(this,n,"lm_close",e))},_$destroy:function(){this.emit("destroy");for(var t=0;t<this.tabs.length;t++)this.tabs[t]._$destroy();this.element.remove()},setActiveContentItem:function(t){for(var e=0;e<this.tabs.length;e++)this.tabs[e].setActive(this.tabs[e].contentItem===t)},removeContentItem:function(t){for(var e=0;e<this.tabs.length;e++)if(this.tabs[e].contentItem===t)return this.tabs[e]._$destroy(),void this.tabs.splice(e,1);throw new Error("contentItem is not controlled by this header")}}),t.controls.HeaderButton=function(t,e,i,n){this._header=t,this._header.on("destroy",this._$destroy,this),this._element=$('<li class="'+i+'" title="'+e+'"></li>'),this._action=n,this._element.click(this._action),this._header.controlsContainer.append(this._element)},t.utils.copy(t.controls.HeaderButton.prototype,{_$destroy:function(){this._element.off(this._action),this._element.remove()}}),t.controls.Splitter=function(e,i){this._isVertical=e,this._size=i,this.element=this._createElement(),this._dragListener=new t.utils.DragListener(this.element)},t.utils.copy(t.controls.Splitter.prototype,{on:function(t,e,i){this._dragListener.on(t,e,i)},_$destroy:function(){this.element.remove()},_createElement:function(){var t=$('<div class="lm_splitter"><div class="lm_drag_handle"></div></div>');return t.addClass("lm_"+(this._isVertical?"vertical":"horizontal")),t[this._isVertical?"height":"width"](this._size),t}}),t.controls.Tab=function(e,i){this.header=e,this.contentItem=i,this.element=$(t.controls.Tab._template),this.titleElement=this.element.find(".lm_title"),this.closeElement=this.element.find(".lm_close_tab"),this.closeElement[i.config.isClosable?"show":"hide"](),this.isActive=!1,this.setTitle(i.isComponent?i.container.title:"title (todo)"),this._layoutManager=this.contentItem.layoutManager,this._dragListener=new t.utils.DragListener(this.element),this._dragListener.on("dragStart",this._onDragStart,this),this._onTabClickFn=t.utils.fnBind(this._onTabClick,this),this._onCloseClickFn=t.utils.fnBind(this._onCloseClick,this),this.element.click(this._onTabClickFn),this.closeElement.click(this._onCloseClickFn)},t.controls.Tab._template='<li class="lm_tab"><i class="lm_left"></i><span class="lm_title"></span><div class="lm_close_tab"></div><i class="lm_right"></i></li>',t.utils.copy(t.controls.Tab.prototype,{setTitle:function(t){this.titleElement.html(t)},setActive:function(t){t!==this.isActive&&(this.isActive=t,t?this.element.addClass("lm_active"):this.element.removeClass("lm_active"))},_$destroy:function(){this.element.off("click",this._onTabClickFn),this.closeElement.off("click",this._onCloseClickFn),this.element.remove()},_onDragStart:function(e,i){new t.controls.DragProxy(e,i,this._dragListener,this._layoutManager,this.contentItem,this.header.parent)},_onTabClick:function(){this.header.parent.setActiveContentItem(this.contentItem)},_onCloseClick:function(t){t.stopPropagation(),this.header.parent.removeChild(this.contentItem)}}),t.container.ItemContainer=function(e,i,n){t.utils.EventEmitter.call(this),this.width=null,this.height=null,this.title=e.componentName,this._parent=i,this._config=e,this._layoutManager=n,this.isHidden=!1,this._element=$(['<div class="lm_item_container">','<div class="lm_content"></div>',"</div>"].join("")),this._contentElement=this._element.find(".lm_content")},t.utils.copy(t.container.ItemContainer.prototype,{getElement:function(){return this._contentElement},hide:function(){this.emit("hide"),this.isHidden=!0,this._element.hide()},show:function(){this.emit("show"),this.isHidden=!1,this._element.show()},setSize:function(t,e){(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,this._contentElement.width(this.width).height(this.height),this.emit("resize"))},close:function(){this._config.isClosable&&(this.emit("close"),this._parent.close())}}),t.errors.ConfigurationError=function(t,e){Error.call(this),this.name="Configuration Error",this.message=t,this.node=e},t.errors.ConfigurationError.prototype=new Error,t.items.AbstractContentItem=function(e,i,n){t.utils.EventEmitter.call(this),this.config=this._extendItemNode(i),this.type=i.type,this.contentItems=[],this.parent=n,this.id=i.id,this.isInitialised=!1,this.isMaximised=!1,this.isRoot=!1,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.layoutManager=e,this._pendingEventPropagations={},this.on(t.utils.EventEmitter.ALL_EVENT,this._propagateEvent,this),i.content&&this._createContentItems(i)},t.utils.copy(t.items.AbstractContentItem.prototype,{setSize:function(){throw new Error("Abstract Method")},callDownwards:function(t,e,i,n){var s;for(i!==!0&&n!==!0&&this[t].apply(this,e||[]),s=0;s<this.contentItems.length;s++)this.contentItems[s].callDownwards(t,e,i);i===!0&&n!==!0&&this[t].apply(this,e||[])},removeChild:function(e,i){var n=t.utils.indexOf(e,this.contentItems);if(-1===n)throw new Error("Can't remove child item. Unknown content item");i!==!0&&this.contentItems[n]._$destroy(),this.contentItems.splice(n,1),this.config.content.splice(n,1),this.contentItems.length>0?this.callDownwards("setSize"):this instanceof t.items.Root||this.parent.removeChild(this)},addChild:function(t,e){void 0===e&&(e=this.contentItems.length),this.contentItems.splice(e,0,t),void 0===this.config.content&&(this.config.content=[]),this.config.content.splice(e,0,t.config),t.parent=this},replaceChild:function(e,i){i=this.layoutManager._$normalizeContentItem(i);var n=t.utils.indexOf(e,this.contentItems),s=e.element[0].parentNode;if(-1===n)throw new Error("Can't replace child. oldChild is not child of this");s.replaceChild(i.element[0],e.element[0]),this.contentItems[n]=i,i.parent=this},remove:function(){this.parent.removeChild(this)},popout:function(){new t.controls.BrowserPopout(this),this._$emitBubblingEvent("stateChanged")},toggleMaximise:function(){this.isMaximised===!0?this.layoutManager._$minimiseItem(this):this.layoutManager._$maximiseItem(this),this.isMaximised=!this.isMaximised,this._$emitBubblingEvent("stateChanged")},getItemsByFilter:function(t){var e=[],i=function(n){for(var s=0;s<n.contentItems.length;s++)t(n.contentItems[s])===!0&&e.push(n.contentItems[s]),i(n.contentItems[s])};return i(this),e},getItemsById:function(e){return this.getItemsByFilter(function(i){return i.id instanceof Array?-1!==t.utils.indexOf(e,i.id):i.id===e})},getItemsByType:function(t){return this._$getItemsByProperty("type",t)},getComponentsByName:function(t){var e,i=this._$getItemsByProperty("componentName",t),n=[];for(e=0;e<i.length;e++)n.push(i[e].instance);return n},_$getItemsByProperty:function(t,e){return this.getItemsByFilter(function(i){return i[t]===e})},_$setParent:function(t){this.parent=t},_$highlightDropZone:function(t,e,i){this.layoutManager.dropTargetIndicator.highlightArea(i)},_$onDrop:function(t){this.addChild(t)},_$hide:function(){this.callDownwards("_$hide",[],!0,!0),this.element.hide()},_$show:function(){this.callDownwards("_$show",[],!0,!0),this.element.show()},_$destroy:function(){this.callDownwards("_$destroy",[],!0,!0),this.element.remove()},_$getArea:function(t){t=t||this.element;var e=t.offset(),i=t.width(),n=t.height();return{x1:e.left,y1:e.top,x2:e.left+i,y2:e.top+n,surface:i*n,contentItem:this}},_$init:function(){var t;for(this.setSize(),t=0;t<this.contentItems.length;t++)this.childElementContainer.append(this.contentItems[t].element);this.isInitialised=!0},_$emitBubblingEvent:function(e){var i=new t.utils.BubblingEvent(e,this);this.emit(e,i)},_createContentItems:function(e){var i,n;if(!(e.content instanceof Array))throw new t.errors.ConfigurationError("content must be an Array",e);for(n=0;n<e.content.length;n++)i=this.layoutManager.createContentItem(e.content[n],this),this.contentItems.push(i)},_extendItemNode:function(e){for(var i in t.config.itemDefaultConfig)void 0===e[i]&&(e[i]=t.config.itemDefaultConfig[i]);return e},_propagateEvent:function(e,i){i instanceof t.utils.BubblingEvent&&i.isPropagationStopped===!1&&this.isInitialised===!0&&(this.isRoot===!1?(!this.parent,this.parent.emit.apply(this.parent,Array.prototype.slice.call(arguments,0))):this._scheduleEventPropagationToLayoutManager(e))},_scheduleEventPropagationToLayoutManager:function(e){this._pendingEventPropagations[e]!==!0&&(this._pendingEventPropagations[e]=!0,t.utils.animFrame(t.utils.fnBind(this._propagateEventToLayoutManager,this,[e])))},_propagateEventToLayoutManager:function(t){this._pendingEventPropagations[t]=!1,this.layoutManager.emit(t)}}),t.items.Component=function(e,i,n){t.items.AbstractContentItem.call(this,e,i,n);var s=e.getComponent(this.config.componentName),o=$.extend(!0,{},this.config.componentState||{});o.componentName=this.config.componentName,this.componentName=this.config.componentName,this.isComponent=!0,this.container=new t.container.ItemContainer(this.config,this,e),this.instance=new s(this.container,o),this.element=this.container._element},t.utils.extend(t.items.Component,t.items.AbstractContentItem),t.utils.copy(t.items.Component.prototype,{_$destroy:function(){this.container.emit("destroy"),t.items.AbstractContentItem.prototype._$destroy.call(this)},setSize:function(){this.container.setSize(this.element.width(),this.element.height())},_$hide:function(){this.container.hide(),t.items.AbstractContentItem.prototype._$hide.call(this)},_$show:function(){this.container.show(),t.items.AbstractContentItem.prototype._$show.call(this)},_$getArea:function(){return null},close:function(){this.parent.removeChild(this)}}),t.items.Root=function(e,i,n){t.items.AbstractContentItem.call(this,e,i,null),this.isRoot=!0,this.element=$('<div class="lm_goldenlayout lm_item lm_root"></div>'),this.childElementContainer=this.element,this._containerElement=n,this._containerElement.append(this.element)},t.utils.extend(t.items.Root,t.items.AbstractContentItem),t.utils.copy(t.items.Root.prototype,{addChild:function(e){if(this.contentItems.length>0)throw new Error("Root node can only have a single child");this.childElementContainer.append(e.element),t.items.AbstractContentItem.prototype.addChild.call(this,e),this.callDownwards("setSize"),this._$emitBubblingEvent("stateChanged")},setSize:function(){var t=this._containerElement.width(),e=this._containerElement.height();this.element.width(t),this.element.height(e),this.contentItems[0].element.width(t),this.contentItems[0].element.height(e)}}),t.items.RowOrColumn=function(e,i,n,s){t.items.AbstractContentItem.call(this,i,n,s),this.isRow=!e,this.isColumn=e,this.element=$('<div class="lm_item lm_'+(e?"column":"row")+'"></div>'),this.childElementContainer=this.element,this._splitterSize=i.config.dimensions.borderWidth,this._isColumn=e,this._dimension=e?"height":"width",this._splitter=[],this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null},t.utils.extend(t.items.RowOrColumn,t.items.AbstractContentItem),t.utils.copy(t.items.RowOrColumn.prototype,{addChild:function(e,i,n){var s,o,r,h;if(e=this.layoutManager._$normalizeContentItem(e),void 0===i&&(i=this.contentItems.length),this.contentItems.length>0?(h=this._createSplitter(i).element,i>0?(this.contentItems[i-1].element.after(h),h.after(e.element)):(this.contentItems[0].element.before(h),h.before(e.element))):this.childElementContainer.append(e.element),t.items.AbstractContentItem.prototype.addChild.call(this,e,i),s=1/this.contentItems.length*100,n!==!0){for(r=0;r<this.contentItems.length;r++)this.contentItems[r]===e?e.config[this._dimension]=s:(o=this.contentItems[r].config[this._dimension]*=(100-s)/100,this.contentItems[r].config[this._dimension]=o);this.callDownwards("setSize"),this._$emitBubblingEvent("stateChanged")}},removeChild:function(e,i){var n,s=e.config[this._dimension],o=t.utils.indexOf(e,this.contentItems),r=Math.max(o-1,0);for(this._splitter[r]&&(this._splitter[r]._$destroy(),this._splitter.splice(r,1)),n=0;n<this.contentItems.length;n++)this.contentItems[n]!==e&&(this.contentItems[n].config[this._dimension]+=s/(this.contentItems.length-1));t.items.AbstractContentItem.prototype.removeChild.call(this,e,i),this.callDownwards("setSize"),this._$emitBubblingEvent("stateChanged")},replaceChild:function(e,i){var n=e.config[this._dimension];t.items.AbstractContentItem.prototype.replaceChild.call(this,e,i),i.config[this._dimension]=n,this.callDownwards("setSize"),this._$emitBubblingEvent("stateChanged")},setSize:function(){this.contentItems.length>0&&(this._calculateRelativeSizes(),this._setAbsoluteSizes()),this._$emitBubblingEvent("stateChanged")},_$init:function(){if(this.isInitialised!==!0){var e;for(t.items.AbstractContentItem.prototype._$init.call(this),e=0;e<this.contentItems.length-1;e++)this.contentItems[e].element.after(this._createSplitter(e).element)}},_setAbsoluteSizes:function(){var t,e,i,n=(this.contentItems.length-1)*this._splitterSize,s=this.element.width(),o=this.element.height();for(this._isColumn?o-=n:s-=n,t=0;t<this.contentItems.length;t++)this._isColumn?(e=Math.floor(o*(this.contentItems[t].config.height/100)),this.contentItems[t].element.width(s),this.contentItems[t].element.height(e)):(i=Math.floor(s*(this.contentItems[t].config.width/100)),this.contentItems[t].element.width(i),this.contentItems[t].element.height(o))},_calculateRelativeSizes:function(){var t,e=0,i=[],n=this._isColumn?"height":"width";for(t=0;t<this.contentItems.length;t++)void 0!==this.contentItems[t].config[n]?e+=this.contentItems[t].config[n]:i.push(this.contentItems[t]);if(100!==Math.round(e))if(Math.round(e)<100&&i.length>0)for(t=0;t<i.length;t++)i[t].config[n]=(100-e)/i.length;else{if(Math.round(e)>100)for(t=0;t<i.length;t++)i[t].config[n]=50,e+=50;for(t=0;t<this.contentItems.length;t++)this.contentItems[t].config[n]=this.contentItems[t].config[n]/e*100}},_createSplitter:function(e){var i;return i=new t.controls.Splitter(this._isColumn,this._splitterSize),i.on("drag",t.utils.fnBind(this._onSplitterDrag,this,[i]),this),i.on("dragStop",t.utils.fnBind(this._onSplitterDragStop,this,[i]),this),i.on("dragStart",t.utils.fnBind(this._onSplitterDragStart,this,[i]),this),this._splitter.splice(e,0,i),i},_getItemsForSplitter:function(e){var i=t.utils.indexOf(e,this._splitter);return{before:this.contentItems[i],after:this.contentItems[i+1]}},_onSplitterDragStart:function(t){var e=this._getItemsForSplitter(t),i=this.layoutManager.config.dimensions[this._isColumn?"minItemHeight":"minItemWidth"];this._splitterPosition=0,this._splitterMinPosition=-1*(e.before.element[this._dimension]()-i),this._splitterMaxPosition=e.after.element[this._dimension]()-i},_onSplitterDrag:function(t,e,i){var n=this._isColumn?i:e;n>this._splitterMinPosition&&n<this._splitterMaxPosition&&(this._splitterPosition=n,t.element.css(this._isColumn?"top":"left",n))},_onSplitterDragStop:function(e){var i=this._getItemsForSplitter(e),n=i.before.element[this._dimension](),s=i.after.element[this._dimension](),o=(this._splitterPosition+n)/(n+s),r=i.before.config[this._dimension]+i.after.config[this._dimension];i.before.config[this._dimension]=o*r,i.after.config[this._dimension]=(1-o)*r,e.element.css({top:0,left:0}),t.utils.animFrame(t.utils.fnBind(this.callDownwards,this,["setSize"]))}}),t.items.Stack=function(e,i,n){t.items.AbstractContentItem.call(this,e,i,n),this.element=$('<div class="lm_item lm_stack"></div>'),this._activeContentItem=null,this._dropZones={},this._dropSegment=null,this._contentAreaDimensions=null,this._dropIndex=null,this.isStack=!0,this.childElementContainer=$('<div class="lm_items"></div>'),this.header=new t.controls.Header(e,this),e.config.settings.hasHeaders===!0&&this.element.append(this.header.element),this.element.append(this.childElementContainer)},t.utils.extend(t.items.Stack,t.items.AbstractContentItem),t.utils.copy(t.items.Stack.prototype,{setSize:function(){var t,e=this.element.width(),i=this.element.height()-this.layoutManager.config.dimensions.headerHeight;for(this.childElementContainer.width(e),this.childElementContainer.height(i),t=0;t<this.contentItems.length;t++)this.contentItems[t].element.width(e).height(i);this._$emitBubblingEvent("stateChanged")},_$init:function(){if(this.isInitialised!==!0){for(var e=0;e<this.contentItems.length;e++)this.header.createTab(this.contentItems[e]),this.contentItems[e]._$hide();this.contentItems.length>0&&this.setActiveContentItem(this.contentItems[0]),t.items.AbstractContentItem.prototype._$init.call(this)}},setActiveContentItem:function(e){if(-1===t.utils.indexOf(e,this.contentItems))throw new Error("Component is not a child of this stack");null!==this._activeContentItem&&this._activeContentItem._$hide(),this._activeContentItem=e,this.header.setActiveContentItem(e),e._$show(),this._$emitBubblingEvent("stateChanged")},addChild:function(e,i){e=this.layoutManager._$normalizeContentItem(e),t.items.AbstractContentItem.prototype.addChild.call(this,e,i),this.childElementContainer.append(e.element),this.header.createTab(e,i),this.setActiveContentItem(e),this.callDownwards("setSize"),this._$emitBubblingEvent("stateChanged")
},removeChild:function(e,i){var n=t.utils.indexOf(e,this.contentItems);t.items.AbstractContentItem.prototype.removeChild.call(this,e,i),this.header.removeContentItem(e),this.contentItems.length>0&&this.setActiveContentItem(this.contentItems[Math.max(n-1,0)]),this._$emitBubblingEvent("stateChanged")},_$destroy:function(){t.items.AbstractContentItem.prototype._$destroy.call(this),this.header._$destroy()},_$onDrop:function(t){if("header"===this._dropSegment)return this._resetHeaderDropZone(),void this.addChild(t,this._dropIndex);var e,i,n="top"===this._dropSegment||"bottom"===this._dropSegment,s="left"===this._dropSegment||"right"===this._dropSegment,o="top"===this._dropSegment||"left"===this._dropSegment,r=n&&this.parent.isColumn||s&&this.parent.isRow,h=n?"column":"row",a=n?"height":"width";t.isComponent&&(e=this.layoutManager.createContentItem({type:"stack"},this),e.addChild(t),t=e),r?this.parent.addChild(t,o?0:void 0):(h=n?"column":"row",i=this.layoutManager.createContentItem({type:h},this),this.parent.replaceChild(this,i),i.addChild(t,o?0:void 0,!0),i.addChild(this,o?void 0:0,!0),this[a]=50,t[a]=50,i.callDownwards("setSize"))},_$highlightDropZone:function(t,e){var i,n;for(i in this._contentAreaDimensions)if(n=this._contentAreaDimensions[i].hoverArea,n.x1<t&&n.x2>t&&n.y1<e&&n.y2>e)return void("header"===i?(this._dropSegment="header",this._highlightHeaderDropZone(t)):(this._resetHeaderDropZone(),this._highlightBodyDropZone(i)))},_$getArea:function(){var e=t.items.AbstractContentItem.prototype._$getArea,i=e.call(this,this.header.element),n=e.call(this,this.childElementContainer),s=n.x2-n.x1,o=n.y2-n.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},highlightArea:{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}}},this._activeContentItem.isComponent===!1?i:(this._contentAreaDimensions.left={hoverArea:{x1:n.x1,y1:n.y1,x2:n.x1+.25*s,y2:n.y2},highlightArea:{x1:n.x1,y1:n.y1,x2:n.x1+.5*s,y2:n.y2}},this._contentAreaDimensions.top={hoverArea:{x1:n.x1+.25*s,y1:n.y1,x2:n.x1+.75*s,y2:n.y1+.5*o},highlightArea:{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y1+.5*o}},this._contentAreaDimensions.right={hoverArea:{x1:n.x1+.75*s,y1:n.y1,x2:n.x2,y2:n.y2},highlightArea:{x1:n.x1+.5*s,y1:n.y1,x2:n.x2,y2:n.y2}},this._contentAreaDimensions.bottom={hoverArea:{x1:n.x1+.25*s,y1:n.y1+.5*o,x2:n.x1+.75*s,y2:n.y2},highlightArea:{x1:n.x1,y1:n.y1+.5*o,x2:n.x2,y2:n.y2}},e.call(this,this.element))},_highlightHeaderDropZone:function(t){var e,i,n,s,o,r,h,a,l=this.header.tabs.length,c=!1;for(e=0;l>e;e++)if(i=this.header.tabs[e].element,o=i.offset(),s=o.left,n=o.top,h=i.width(),t>s&&s+h>t){c=!0;break}c===!1&&s>t||(a=s+h/2,a>t?(this._dropIndex=e,i.before(this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(e+1,l),i.after(this.layoutManager.tabDropPlaceholder)),r=this.layoutManager.tabDropPlaceholder.offset().left,this.layoutManager.dropTargetIndicator.highlightArea({x1:r,x2:r+this.layoutManager.tabDropPlaceholder.width(),y1:n,y2:n+i.height()}))},_resetHeaderDropZone:function(){this.layoutManager.tabDropPlaceholder.remove()},_highlightBodyDropZone:function(t){var e=this._contentAreaDimensions[t].highlightArea;this.layoutManager.dropTargetIndicator.highlightArea(e),this._dropSegment=t}}),t.utils.BubblingEvent=function(t,e){this.name=t,this.origin=e,this.isPropagationStopped=!1},t.utils.BubblingEvent.prototype.stopPropagation=function(){this.isPropagationStopped=!0},t.LayoutManager}();