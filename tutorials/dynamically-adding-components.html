<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>GOLDEN LAYOUT</title>

	<link rel="stylesheet" type="text/css" href="..\assets\css\screen.css" />
	
	<link rel="stylesheet" type="text/css" href="..\assets\css\api.css" />
	<link rel="stylesheet" type="text/css" href="..\assets\css\syntaxhighlighter.css" />
	
</head>
<body class="category_tutorials"> 
	<div class="topSection">
		<header class="orangeGradient micro">
			<h1><a href="..">GoldenLayout the ultimate webapp layout manager</a></h1>
			<a class="download" href="..\download">download</a>
		</header>

		<nav class="standalone">
			
			<img src="..\assets\images\hoxton-background.jpg" />
			
			<ul>
				<li ><a href="..">START</a></li>
				<li ><a href="..\download">DOWNLOAD</a></li>
				<li ><a href="..\examples">EXAMPLES</a></li>
				<li class="active"><a href="..\tutorials">TUTORIALS</a></li>
				<li ><a href="..\docs">DOCS</a></li>
				<li ><a href="..\buylicense">BUY</a></li>
			</ul>
		</nav>
	</div>
	
	<div id="wrapper">
		<ul id="subnav">
	<li >
		<a href="getting-started.html">Getting Started</a>
		<div class="isActiveIndicator orangeGradient"></div>
	</li>
	<li >
		<a href="saving-state.html">Saving State</a>
		<div class="isActiveIndicator orangeGradient"></div>
	</li>
	<li class="active">
		<a href="dynamically-adding-components.html">Adding Items</a>
		<div class="isActiveIndicator orangeGradient"></div>
	</li>
</ul>
		<div id="content">
			<h1>Dynamically adding Components</h1><p>Often you&#39;d want to give your users the ability to add new items to an existing layout. GoldenLayout offers a number of ways to do this.</p><ul>
<li>You can turn any DOM element on the page into a draggable item that turns into a layoutItem when dragged</li>
<li>You can let the user select an element and add items to it</li>
<li>You can add items to a programmatically specified element</li>
</ul>
<h3>Creating a layout</h3><p>For this tutorial we don&#39;t insert the layout directly into the body, but instead into a div to leave some space for a component menu.</p><pre><code>&lt;<span class="hljs-keyword">div</span> <span class="hljs-property">id</span>=<span class="hljs-string">"wrapper"</span>&gt;
    &lt;ul <span class="hljs-property">id</span>=<span class="hljs-string">"menuContainer"</span>&gt;&lt;/ul&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-property">id</span>=<span class="hljs-string">"layoutContainer"</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre><p>Let&#39;s keep things simple: Create a basic layout with two components in a row</p><pre><code><span class="hljs-keyword">var</span> config = {
    content: [{
        type: <span class="hljs-string">'row'</span>,
        content: [{
            type:<span class="hljs-string">'component'</span>,
            componentName: <span class="hljs-string">'example'</span>,
            componentState: { text: <span class="hljs-string">'Component 1'</span> }
        },
        {
            type:<span class="hljs-string">'component'</span>,
            componentName: <span class="hljs-string">'example'</span>,
            componentState: { text: <span class="hljs-string">'Component 2'</span> }
        }]
    }]
};

<span class="hljs-keyword">var</span> myLayout = <span class="hljs-keyword">new</span> window.GoldenLayout( config, $(<span class="hljs-string">'#layoutContainer'</span>) );

myLayout.registerComponent( <span class="hljs-string">'example'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( container, state )</span>{</span>
    container.getElement().html( <span class="hljs-string">'&lt;h2&gt;'</span> + state.text + <span class="hljs-string">'&lt;/h2&gt;'</span>);
});

myLayout.init();
</code></pre><h3>Creating the &quot;insert component&quot; menu</h3><p>The &quot;insert component&quot; menu will be created programmatically as well. That&#39;s where we&#39;ll add the actual insertion code later on</p><pre><code><span class="hljs-keyword">var</span> addMenuItem = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( text )</span> {</span>
    <span class="hljs-keyword">var</span> element = $( <span class="hljs-string">'&lt;li&gt;'</span> + text + <span class="hljs-string">'&lt;/li&gt;'</span> );
    $( <span class="hljs-string">'#menuContainer'</span> ).append( element );

    <span class="hljs-comment">//insert code will go here</span>
};

addMenuItem( <span class="hljs-string">'User added component A'</span> );
addMenuItem( <span class="hljs-string">'User added component B'</span> );
</code></pre><h3>Adding items to a layout - in general</h3><p>Right, time to write some &quot;add component&quot; functionality. GoldenLayout builds up a tree of items internally that can be accessed through &#39;myLayout.root&#39; once the layout is initialised. Every one of these items has an &#39;addChild( itemOrConfig, index )&#39; method.</p><p>&#39;index&#39; is optional, it&#39;s used to tell rows, columns and stacks at which position to insert the new item.</p><p>The important bit for us is &#39;itemOrConfig&#39;. This can take any kind of item config - which means it&#39;s also possible to create / insert a whole tree of new items at once.</p><p>Let&#39;s prepare a bit of item configuration in our &#39;addMenuItem&#39; function</p><pre><code><span class="hljs-keyword">var</span> newItemConfig = {
    <span class="hljs-keyword">type</span>: <span class="hljs-string">'component'</span>,
    componentName: <span class="hljs-string">'example'</span>,
    componentState: { text: text }
};
</code></pre><p>The tricky bit is not so much creating the item, but selecting the element to which to add the item to. All three approaches we&#39;ll cover next are basically just that: different ways of selecting the parent for the new component.</p><h3>First: The really awesome way</h3><p>GoldenLayout makes it simple to turn any DOM element into a &quot;dragSource&quot;, which allows for the creation of components by simply dragging the element onto the layout.</p><p>All that needs adding to our &#39;addMenuItem&#39; method is this line:</p><pre><code>myLayout<span class="hljs-preprocessor">.createDragSource</span>( element, newItemConfig )<span class="hljs-comment">;</span>
</code></pre><p>Works like a charm:</p><p><p data-height="268" data-theme-id="7376" data-slug-hash="d508753b29c3001c24218bf3a6b25141" data-default-tab="result" class='codepen'>See the Pen <a href='http://codepen.io/wolframhempel/pen/d508753b29c3001c24218bf3a6b25141/'>Adding items from drag Sources</a> by Wolfram Hempel (<a href='http://codepen.io/wolframhempel'>@wolframhempel</a>) on <a href='http://codepen.io'>CodePen</a>.</p></p><script async src="//codepen.io/assets/embed/ei.js"></script>


<h3>Second: Add items to a selected stack</h3><p>GoldenLayout supports selecting items by clicking onto the empty space in the header area. This is however disabled by default. To enable it, simply add this to your config:</p><pre><code>var config = {
    settings: {
        selectionEnabled: true
    },
    content: [<span class="hljs-keyword">...</span>]
};
</code></pre><p>Now if the user clicks on a header it into a different color, GoldenLayout emits a &#39;selectionChanged&#39; event and the value of &#39;myLayout.selectedItem&#39; points to the selected item.</p><p>To use this we&#39;ll change our insert logic to this:</p><pre><code><span class="hljs-transposed_variable">element.</span>click(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
    <span class="hljs-keyword">if</span>( <span class="hljs-transposed_variable">myLayout.</span>selectedItem === null ) <span class="hljs-cell">{
        alert( <span class="hljs-string">'No item selected'</span> );
    }</span> <span class="hljs-keyword">else</span> <span class="hljs-cell">{
        myLayout.selectedItem.addChild( newItemConfig );
    }</span>
});
</code></pre><p>Now clicking an li in the &quot;insert component&quot; menu will add the component to whatever
stack is selected - or alert if no selection had been made.</p><p><p data-height="268" data-theme-id="7376" data-slug-hash="9dd68b285dc421364ac9ec13f2bdc999" data-default-tab="result" class='codepen'>See the Pen <a href='http://codepen.io/wolframhempel/pen/9dd68b285dc421364ac9ec13f2bdc999/'>Adding items to selected stacks</a> by Wolfram Hempel (<a href='http://codepen.io/wolframhempel'>@wolframhempel</a>) on <a href='http://codepen.io'>CodePen</a>.</p></p><script async src="//codepen.io/assets/embed/ei.js"></script>

<h3>Third: Adding items to a previously specified element</h3><p>If we don&#39;t want to give the user a choice of where to add the new item to we can just specify an element ourselves. Either by using one of the getter-functions, (e.g. &#39;myLayout.root.getItemsById( &#39;myParentItem&#39; );&#39;) or by traversing the item tree.</p><p>For instance, if we always want to add items to the topmost row, it would look like this:</p><pre><code>element<span class="hljs-preprocessor">.click</span>(function(){
    myLayout<span class="hljs-preprocessor">.root</span><span class="hljs-preprocessor">.contentItems</span>[ <span class="hljs-number">0</span> ]<span class="hljs-preprocessor">.addChild</span>( newItemConfig )<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre><p><p data-height="268" data-theme-id="7376" data-slug-hash="cdcb9de8e7b305d2ec81b4ae4e392832" data-default-tab="result" class='codepen'>See the Pen <a href='http://codepen.io/wolframhempel/pen/cdcb9de8e7b305d2ec81b4ae4e392832/'>Adding items to a predefined parent</a> by Wolfram Hempel (<a href='http://codepen.io/wolframhempel'>@wolframhempel</a>) on <a href='http://codepen.io'>CodePen</a>.</p></p><script async src="//codepen.io/assets/embed/ei.js"></script>
		</div>
	</div>
	

	
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-53022077-1', 'auto');
	  ga('send', 'pageview');

	</script>
	
</body>
</html>